plugins {
    id 'java'
}

dependencies {
    implementation fileTree('lib')
    implementation files(System.getenv('SQRL_JAR_PATH'))
}
jar {
    manifest {
        attributes "Main-Class": "com.datasqrl.FlinkMain"
    }
    from('.') {
        include '**'
        exclude 'build.gradle'
        exclude 'lib'
        exclude 'gradle'
        exclude '.gradle'
        exclude 'build'
        exclude '.idea'
        exclude 'gradle*'
        into('build')
    }

    from {
        configurations.runtimeClasspath.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    zip64=true
}