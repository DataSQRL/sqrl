<!DOCTYPE html>
<html>
  <head>
    <title>Visualize DAG with Cytoscape.js</title>
    <script src="https://www.unpkg.com/@datasqrl/dag-visualization@latest/dist/umd/index.js"></script>
    <link
      rel="stylesheet"
      href="https://www.unpkg.com/@datasqrl/dag-visualization@latest/dist/index.css"
    />
  </head>
  <body>
    <div id="graph"></div>
    <script>
      let elements = ${DAG}
      const nodes = elements.map(function (node) {
        return { data: node };
      });

      const edges = elements.flatMap((node) =>
        (node?.inputs || []).map((input) => ({
          data: { source: input, target: node?.id },
        }))
      );
      DAGVisualization.renderGraph(document.getElementById("graph"), {
        nodes,
        edges,
      });
    </script>
  </body>
</html>
