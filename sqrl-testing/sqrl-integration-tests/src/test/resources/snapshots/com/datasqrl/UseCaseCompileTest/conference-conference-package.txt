>>>pipeline_explain.txt
=== AddInterest
ID:     addinterest_2
Type:   stream
Stage:  flink
Primary Key: _uuid
Timestamp  : event_time
Schema:
 - text: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - userid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - _uuid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - event_time: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) NOT NULL
 - embedding: RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')
Plan:
LogicalProject(text=[$0], userid=[$1], _uuid=[$2], event_time=[$3], embedding=[asciiTextTestEmbed($0)])
  LogicalTableScan(table=[[addinterest_1]])

=== Events
ID:     events_2
Type:   stream
Stage:  flink
Primary Key: url, last_updated
Timestamp  : last_updated
Schema:
 - url: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - date: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - time: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - title: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - abstract: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - location: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - speakers: RecordType(VARCHAR(2147483647) CHARACTER SET "UTF-16LE" name, VARCHAR(2147483647) CHARACTER SET "UTF-16LE" title, VARCHAR(2147483647) CHARACTER SET "UTF-16LE" company) NOT NULL ARRAY NOT NULL
 - last_updated: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) NOT NULL
 - id: BIGINT NOT NULL
 - full_text: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - embedding: RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')
 - startTime: VARCHAR(2147483647) CHARACTER SET "UTF-16LE"
 - startTimestamp: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3)
Plan:
LogicalProject(url=[$0], date=[$1], time=[$2], title=[$3], abstract=[$4], location=[$5], speakers=[$6], last_updated=[$7], id=[COALESCE(CAST(REGEXP_EXTRACT($0, '(\d*)$')):BIGINT, 0:BIGINT)], full_text=[CONCAT($3, '\n', $4)], embedding=[asciiTextTestEmbed(CONCAT($3, '\n', $4))], startTime=[CONCAT(TRIM(FLAG(BOTH), ' ', REGEXP_EXTRACT($1, '^[^-]*')), ' ', TRIM(FLAG(BOTH), ' ', REGEXP_EXTRACT($2, '\d\d?:\d\d\s(AM|PM)')))], startTimestamp=[parseTimestamp(CONCAT(CONCAT(TRIM(FLAG(BOTH), ' ', REGEXP_EXTRACT($1, '^[^-]*')), ' ', TRIM(FLAG(BOTH), ' ', REGEXP_EXTRACT($2, '\d\d?:\d\d\s(AM|PM)'))), ' PDT'), 'MMMM d, yyyy h:mm a z')])
  LogicalTableScan(table=[[events_1]])

=== Events
ID:     events_3
Type:   state
Stage:  flink
Inputs: events_2
Primary Key: id
Timestamp  : last_updated
Schema:
 - url: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - date: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - time: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - title: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - abstract: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - location: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - speakers: RecordType(VARCHAR(2147483647) CHARACTER SET "UTF-16LE" name, VARCHAR(2147483647) CHARACTER SET "UTF-16LE" title, VARCHAR(2147483647) CHARACTER SET "UTF-16LE" company) NOT NULL ARRAY NOT NULL
 - last_updated: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) NOT NULL
 - id: BIGINT NOT NULL
 - full_text: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - embedding: RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')
 - startTime: VARCHAR(2147483647) CHARACTER SET "UTF-16LE"
 - startTimestamp: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3)
Post Processors:
 - topN: partition=id limit=1 sort=#7: last_updated TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) DESC 
Plan:
LogicalTableScan(table=[[events_2]])

=== Likes
ID:     likes_2
Type:   stream
Stage:  flink
Primary Key: _uuid
Timestamp  : event_time
Schema:
 - eventId: BIGINT NOT NULL
 - userid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - liked: BOOLEAN NOT NULL
 - _uuid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - event_time: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) NOT NULL
Plan:
LogicalTableScan(table=[[likes_1]])

=== LikeVector
ID:     likevector_1
Type:   stream
Stage:  flink
Inputs: events_3, likes_2
Primary Key: _uuid
Timestamp  : event_time
Schema:
 - userid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - embedding: RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')
 - title: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - abstract: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - location: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - event_time: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) NOT NULL
 - _uuid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
Plan:
LogicalProject(userid=[$1], embedding=[$15], title=[$8], abstract=[$9], location=[$10], event_time=[$4], _uuid=[$3])
  LogicalJoin(condition=[=($0, $13)], joinType=[inner]) hints[TemporalJoinHint options:[4]]
    LogicalFilter(condition=[$2])
      LogicalTableScan(table=[[likes_2]])
    LogicalFilter(condition=[=($13, 1)]) hints[DedupHint]
      LogicalProject(url=[$0], date=[$1], time=[$2], title=[$3], abstract=[$4], location=[$5], speakers=[$6], last_updated=[$7], id=[$8], full_text=[$9], embedding=[$10], startTime=[$11], startTimestamp=[$12], _rownum=[ROW_NUMBER() OVER (PARTITION BY $8 ORDER BY $7 DESC NULLS FIRST)])
        LogicalTableScan(table=[[events_3]])

=== UserInterests
ID:     userinterests_1
Type:   state
Stage:  flink
Inputs: userinterestvectors_1
Primary Key: userid
Timestamp  : __timestamp
Schema:
 - userid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - interestVector: RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')
 - __timestamp: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) NOT NULL
Plan:
LogicalAggregate(group=[{0}], interestVector=[center($1)], __timestamp=[MAX($2)])
  LogicalTableScan(table=[[userinterestvectors_1]])

=== UserInterestVectors
ID:     userinterestvectors_1
Type:   stream
Stage:  flink
Inputs: addinterest_2, likevector_1
Primary Key: __pk_0
Timestamp  : event_time
Schema:
 - userid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - embedding: RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')
 - event_time: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) NOT NULL
 - __pk_0: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
Plan:
LogicalUnion(all=[true])
  LogicalProject(userid=[$0], embedding=[$1], event_time=[$5], __pk_0=[$6])
    LogicalTableScan(table=[[likevector_1]])
  LogicalProject(userid=[$1], embedding=[$4], event_time=[$3], __pk_0=[$2])
    LogicalTableScan(table=[[addinterest_2]])

=== UserLikes
ID:     userlikes_1
Type:   state
Stage:  flink
Inputs: likes_2
Primary Key: userid, eventId
Timestamp  : event_time
Schema:
 - eventId: BIGINT NOT NULL
 - userid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - liked: BOOLEAN NOT NULL
 - _uuid: VARCHAR(2147483647) CHARACTER SET "UTF-16LE" NOT NULL
 - event_time: TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) NOT NULL
Post Processors:
 - topN: partition=userid, eventId limit=1 sort=#4: event_time TIMESTAMP_WITH_LOCAL_TIME_ZONE(3) DESC 
Plan:
LogicalTableScan(table=[[likes_2]])

>>>flink.json
{
  "flinkSql" : [
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `cosinedistance` AS 'com.datasqrl.vector.CosineDistance' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `onnxembed` AS 'com.datasqrl.vector.OnnxEmbed' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `textsearch` AS 'com.datasqrl.text.TextSearch' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `ToJson` AS 'com.datasqrl.json.ToJson' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `asciitexttestembed` AS 'com.datasqrl.vector.AsciiTextTestEmbed' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `center` AS 'com.datasqrl.vector.Center' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `euclideandistance` AS 'com.datasqrl.vector.EuclideanDistance' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `vectortodouble` AS 'com.datasqrl.vector.VectorToDouble' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `parsetimestamp` AS 'com.datasqrl.time.ParseTimestamp' LANGUAGE JAVA;",
    "CREATE TEMPORARY FUNCTION IF NOT EXISTS `cosinesimilarity` AS 'com.datasqrl.vector.CosineSimilarity' LANGUAGE JAVA;",
    "CREATE TEMPORARY TABLE `events_1` (\n  `url` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `date` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `time` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `title` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `abstract` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `location` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `speakers` ROW(`name` VARCHAR(2147483647) CHARACTER SET `UTF-16LE`, `title` VARCHAR(2147483647) CHARACTER SET `UTF-16LE`, `company` VARCHAR(2147483647) CHARACTER SET `UTF-16LE`) NOT NULL ARRAY NOT NULL,\n  `last_updated` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL,\n  PRIMARY KEY (`url`, `last_updated`) NOT ENFORCED,\n  WATERMARK FOR `last_updated` AS `last_updated` - INTERVAL '0.001' SECOND\n) WITH (\n  'format' = 'flexible-json',\n  'path' = '${DATA_PATH}/events.jsonl',\n  'source.monitor-interval' = '1',\n  'connector' = 'filesystem'\n);",
    "CREATE TEMPORARY TABLE `likes_1` (\n  `eventId` BIGINT NOT NULL,\n  `userid` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `liked` BOOLEAN NOT NULL,\n  `_uuid` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `event_time` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL METADATA FROM 'timestamp',\n  WATERMARK FOR `event_time` AS `event_time` - INTERVAL '0.0' SECOND\n) WITH (\n  'properties.bootstrap.servers' = '${PROPERTIES_BOOTSTRAP_SERVERS}',\n  'properties.auto.offset.reset' = 'earliest',\n  'connector' = 'kafka',\n  'format' = 'flexible-json',\n  'properties.group.id' = '${PROPERTIES_GROUP_ID}',\n  'topic' = 'conference-likes',\n  'scan.startup.mode' = 'group-offsets'\n);",
    "CREATE TEMPORARY TABLE `addinterest_1` (\n  `text` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `userid` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `_uuid` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `event_time` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL METADATA FROM 'timestamp',\n  WATERMARK FOR `event_time` AS `event_time` - INTERVAL '0.0' SECOND\n) WITH (\n  'properties.bootstrap.servers' = '${PROPERTIES_BOOTSTRAP_SERVERS}',\n  'properties.auto.offset.reset' = 'earliest',\n  'connector' = 'kafka',\n  'format' = 'flexible-json',\n  'properties.group.id' = '${PROPERTIES_GROUP_ID}',\n  'topic' = 'conference-addinterest',\n  'scan.startup.mode' = 'group-offsets'\n);",
    "CREATE TEMPORARY TABLE `events_3` (\n  `url` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `date` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `time` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `title` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `abstract` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `location` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `speakers` RAW('com.datasqrl.json.FlinkJsonType', 'ADFjb20uZGF0YXNxcmwuanNvbi5GbGlua0pzb25UeXBlU2VyaWFsaXplclNuYXBzaG90AAAAAQApY29tLmRhdGFzcXJsLmpzb24uRmxpbmtKc29uVHlwZVNlcmlhbGl6ZXI='),\n  `last_updated` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL,\n  `id` BIGINT NOT NULL,\n  `full_text` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `embedding` RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg=='),\n  `startTime` VARCHAR(2147483647) CHARACTER SET `UTF-16LE`,\n  `startTimestamp` TIMESTAMP(3) WITH LOCAL TIME ZONE,\n  PRIMARY KEY (`id`) NOT ENFORCED\n) WITH (\n  'password' = '${JDBC_PASSWORD}',\n  'connector' = 'jdbc-sqrl',\n  'driver' = 'org.postgresql.Driver',\n  'table-name' = 'events_3',\n  'url' = '${JDBC_URL}',\n  'username' = '${JDBC_USERNAME}'\n);",
    "CREATE TEMPORARY TABLE `userinterests_1` (\n  `userid` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `interestVector` RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg=='),\n  `__timestamp` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL,\n  PRIMARY KEY (`userid`) NOT ENFORCED\n) WITH (\n  'password' = '${JDBC_PASSWORD}',\n  'connector' = 'jdbc-sqrl',\n  'driver' = 'org.postgresql.Driver',\n  'table-name' = 'userinterests_1',\n  'url' = '${JDBC_URL}',\n  'username' = '${JDBC_USERNAME}'\n);",
    "CREATE TEMPORARY TABLE `userlikes_1` (\n  `eventId` BIGINT NOT NULL,\n  `userid` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `liked` BOOLEAN NOT NULL,\n  `_uuid` VARCHAR(2147483647) CHARACTER SET `UTF-16LE` NOT NULL,\n  `event_time` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL,\n  PRIMARY KEY (`userid`, `eventId`) NOT ENFORCED\n) WITH (\n  'password' = '${JDBC_PASSWORD}',\n  'connector' = 'jdbc-sqrl',\n  'driver' = 'org.postgresql.Driver',\n  'table-name' = 'userlikes_1',\n  'url' = '${JDBC_URL}',\n  'username' = '${JDBC_USERNAME}'\n);",
    "CREATE VIEW `table$1`\nAS\nSELECT `url`, `date`, `time`, `title`, `abstract`, `location`, TOJSON(`speakers`) AS `speakers`, `last_updated`, COALESCE(CAST(REGEXP_EXTRACT(`url`, '(\\d*)$') AS BIGINT), 0) AS `id`, CONCAT(`title`, '\\n', `abstract`) AS `full_text`, ASCIITEXTTESTEMBED(CONCAT(`title`, '\\n', `abstract`)) AS `embedding`, CONCAT(TRIM(BOTH ' ' FROM REGEXP_EXTRACT(`date`, '^[^-]*')), ' ', TRIM(BOTH ' ' FROM REGEXP_EXTRACT(`time`, '\\d\\d?:\\d\\d\\s(AM|PM)'))) AS `startTime`, PARSETIMESTAMP(CONCAT(CONCAT(TRIM(BOTH ' ' FROM REGEXP_EXTRACT(`date`, '^[^-]*')), ' ', TRIM(BOTH ' ' FROM REGEXP_EXTRACT(`time`, '\\d\\d?:\\d\\d\\s(AM|PM)'))), ' PDT'), 'MMMM d, yyyy h:mm a z') AS `startTimestamp`\nFROM `events_1`;",
    "CREATE VIEW `table$2`\nAS\nSELECT *\nFROM (SELECT `url`, `date`, `time`, `title`, `abstract`, `location`, `speakers`, `last_updated`, `id`, `full_text`, `embedding`, `startTime`, `startTimestamp`, ROW_NUMBER() OVER (PARTITION BY `id` ORDER BY `last_updated` DESC) AS `_rownum`\n  FROM (SELECT `url`, `date`, `time`, `title`, `abstract`, `location`, `speakers`, `last_updated`, COALESCE(CAST(REGEXP_EXTRACT(`url`, '(\\d*)$') AS BIGINT), 0) AS `id`, CONCAT(`title`, '\\n', `abstract`) AS `full_text`, ASCIITEXTTESTEMBED(CONCAT(`title`, '\\n', `abstract`)) AS `embedding`, CONCAT(TRIM(BOTH ' ' FROM REGEXP_EXTRACT(`date`, '^[^-]*')), ' ', TRIM(BOTH ' ' FROM REGEXP_EXTRACT(`time`, '\\d\\d?:\\d\\d\\s(AM|PM)'))) AS `startTime`, PARSETIMESTAMP(CONCAT(CONCAT(TRIM(BOTH ' ' FROM REGEXP_EXTRACT(`date`, '^[^-]*')), ' ', TRIM(BOTH ' ' FROM REGEXP_EXTRACT(`time`, '\\d\\d?:\\d\\d\\s(AM|PM)'))), ' PDT'), 'MMMM d, yyyy h:mm a z') AS `startTimestamp`\n    FROM `events_1`) AS `t`) AS `t0`\nWHERE `_rownum` = 1;",
    "CREATE VIEW `table$3`\nAS\nSELECT `userid`, CENTER(`embedding`) AS `interestVector`, MAX(`event_time`) AS `__timestamp`\nFROM (SELECT `$cor0`.`userid`, `t1`.`embedding`, `$cor0`.`event_time`, `$cor0`.`_uuid` AS `__pk_0`\n   FROM (SELECT *\n     FROM `likes_1`\n     WHERE `liked`) AS `$cor0`\n    INNER JOIN `table$2` FOR SYSTEM_TIME AS OF `$cor0`.`event_time` AS `t1` ON `$cor0`.`eventId` = `t1`.`id`\n   UNION ALL\n   SELECT `userid`, ASCIITEXTTESTEMBED(`text`) AS `embedding`, `event_time`, `_uuid` AS `__pk_0`\n   FROM `addinterest_1`) AS `t7`\nGROUP BY `userid`;",
    "CREATE VIEW `table$4`\nAS\nSELECT *\nFROM `likes_1`;",
    "EXECUTE STATEMENT SET BEGIN\nINSERT INTO `events_3`\n(SELECT *\n FROM `table$1`)\n;\nINSERT INTO `userinterests_1`\n (SELECT *\n  FROM `table$3`)\n ;\n INSERT INTO `userlikes_1`\n  (SELECT *\n   FROM `table$4`)\n  ;\n  END;"
  ],
  "connectors" : [
    "jdbc-sqrl",
    "kafka",
    "filesystem"
  ],
  "formats" : [
    "flexible-json"
  ],
  "compliedPlan" : "{\n  \"flinkVersion\" : \"1.19\",\n  \"nodes\" : [ {\n    \"id\" : 61,\n    \"type\" : \"stream-exec-table-source-scan_1\",\n    \"scanTableSource\" : {\n      \"table\" : {\n        \"identifier\" : \"`default_catalog`.`default_database`.`events_1`\"\n      }\n    },\n    \"outputType\" : \"ROW<`url` VARCHAR(2147483647) NOT NULL, `date` VARCHAR(2147483647) NOT NULL, `time` VARCHAR(2147483647) NOT NULL, `title` VARCHAR(2147483647) NOT NULL, `abstract` VARCHAR(2147483647) NOT NULL, `location` VARCHAR(2147483647) NOT NULL, `speakers` ARRAY<ROW<`name` VARCHAR(2147483647), `title` VARCHAR(2147483647), `company` VARCHAR(2147483647)> NOT NULL> NOT NULL, `last_updated` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL>\",\n    \"description\" : \"TableSourceScan(table=[[default_catalog, default_database, events_1]], fields=[url, date, time, title, abstract, location, speakers, last_updated])\",\n    \"inputProperties\" : [ ]\n  }, {\n    \"id\" : 62,\n    \"type\" : \"stream-exec-watermark-assigner_1\",\n    \"watermarkExpr\" : {\n      \"kind\" : \"CALL\",\n      \"syntax\" : \"BINARY\",\n      \"internalName\" : \"$-$1\",\n      \"operands\" : [ {\n        \"kind\" : \"INPUT_REF\",\n        \"inputIndex\" : 7,\n        \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL\"\n      }, {\n        \"kind\" : \"LITERAL\",\n        \"value\" : \"1\",\n        \"type\" : \"INTERVAL SECOND(6) NOT NULL\"\n      } ],\n      \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL\"\n    },\n    \"rowtimeFieldIndex\" : 7,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"url\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"date\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"time\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"title\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"abstract\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"location\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"speakers\",\n        \"fieldType\" : \"ARRAY<ROW<`name` VARCHAR(2147483647), `title` VARCHAR(2147483647), `company` VARCHAR(2147483647)> NOT NULL> NOT NULL\"\n      }, {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"WatermarkAssigner(rowtime=[last_updated], watermark=[(last_updated - 1:INTERVAL SECOND)])\"\n  }, {\n    \"id\" : 63,\n    \"type\" : \"stream-exec-calc_1\",\n    \"projection\" : [ {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 0,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 1,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 2,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 3,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 4,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 5,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"CALL\",\n      \"catalogName\" : \"`default_catalog`.`default_database`.`TOJSON`\",\n      \"operands\" : [ {\n        \"kind\" : \"INPUT_REF\",\n        \"inputIndex\" : 6,\n        \"type\" : \"ARRAY<ROW<`name` VARCHAR(2147483647), `title` VARCHAR(2147483647), `company` VARCHAR(2147483647)> NOT NULL> NOT NULL\"\n      } ],\n      \"type\" : \"RAW('com.datasqrl.json.FlinkJsonType', 'ADFjb20uZGF0YXNxcmwuanNvbi5GbGlua0pzb25UeXBlU2VyaWFsaXplclNuYXBzaG90AAAAAQApY29tLmRhdGFzcXJsLmpzb24uRmxpbmtKc29uVHlwZVNlcmlhbGl6ZXI=')\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 7,\n      \"type\" : {\n        \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n        \"nullable\" : false,\n        \"precision\" : 3,\n        \"kind\" : \"ROWTIME\"\n      }\n    }, {\n      \"kind\" : \"CALL\",\n      \"internalName\" : \"$COALESCE$1\",\n      \"operands\" : [ {\n        \"kind\" : \"CALL\",\n        \"syntax\" : \"SPECIAL\",\n        \"internalName\" : \"$CAST$1\",\n        \"operands\" : [ {\n          \"kind\" : \"CALL\",\n          \"internalName\" : \"$REGEXP_EXTRACT$1\",\n          \"operands\" : [ {\n            \"kind\" : \"INPUT_REF\",\n            \"inputIndex\" : 0,\n            \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n          }, {\n            \"kind\" : \"LITERAL\",\n            \"value\" : \"(\\\\d*)$\",\n            \"type\" : \"CHAR(6) NOT NULL\"\n          } ],\n          \"type\" : \"VARCHAR(2147483647)\"\n        } ],\n        \"type\" : \"BIGINT\"\n      }, {\n        \"kind\" : \"LITERAL\",\n        \"value\" : 0,\n        \"type\" : \"BIGINT NOT NULL\"\n      } ],\n      \"type\" : \"BIGINT NOT NULL\"\n    }, {\n      \"kind\" : \"CALL\",\n      \"internalName\" : \"$CONCAT$1\",\n      \"operands\" : [ {\n        \"kind\" : \"INPUT_REF\",\n        \"inputIndex\" : 3,\n        \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"kind\" : \"LITERAL\",\n        \"value\" : \"\\\\n\",\n        \"type\" : \"CHAR(2) NOT NULL\"\n      }, {\n        \"kind\" : \"INPUT_REF\",\n        \"inputIndex\" : 4,\n        \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n      } ],\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"CALL\",\n      \"catalogName\" : \"`default_catalog`.`default_database`.`ASCIITEXTTESTEMBED`\",\n      \"operands\" : [ {\n        \"kind\" : \"CALL\",\n        \"internalName\" : \"$CONCAT$1\",\n        \"operands\" : [ {\n          \"kind\" : \"INPUT_REF\",\n          \"inputIndex\" : 3,\n          \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n        }, {\n          \"kind\" : \"LITERAL\",\n          \"value\" : \"\\\\n\",\n          \"type\" : \"CHAR(2) NOT NULL\"\n        }, {\n          \"kind\" : \"INPUT_REF\",\n          \"inputIndex\" : 4,\n          \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n        } ],\n        \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n      } ],\n      \"type\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n    }, {\n      \"kind\" : \"CALL\",\n      \"internalName\" : \"$CONCAT$1\",\n      \"operands\" : [ {\n        \"kind\" : \"CALL\",\n        \"internalName\" : \"$TRIM$1\",\n        \"operands\" : [ {\n          \"kind\" : \"LITERAL\",\n          \"symbol\" : \"TRIM\",\n          \"value\" : \"BOTH\",\n          \"type\" : {\n            \"type\" : \"SYMBOL\",\n            \"nullable\" : false\n          }\n        }, {\n          \"kind\" : \"LITERAL\",\n          \"value\" : \" \",\n          \"type\" : \"CHAR(1) NOT NULL\"\n        }, {\n          \"kind\" : \"CALL\",\n          \"internalName\" : \"$REGEXP_EXTRACT$1\",\n          \"operands\" : [ {\n            \"kind\" : \"INPUT_REF\",\n            \"inputIndex\" : 1,\n            \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n          }, {\n            \"kind\" : \"LITERAL\",\n            \"value\" : \"^[^-]*\",\n            \"type\" : \"CHAR(6) NOT NULL\"\n          } ],\n          \"type\" : \"VARCHAR(2147483647)\"\n        } ],\n        \"type\" : \"VARCHAR(2147483647)\"\n      }, {\n        \"kind\" : \"LITERAL\",\n        \"value\" : \" \",\n        \"type\" : \"CHAR(1) NOT NULL\"\n      }, {\n        \"kind\" : \"CALL\",\n        \"internalName\" : \"$TRIM$1\",\n        \"operands\" : [ {\n          \"kind\" : \"LITERAL\",\n          \"symbol\" : \"TRIM\",\n          \"value\" : \"BOTH\",\n          \"type\" : {\n            \"type\" : \"SYMBOL\",\n            \"nullable\" : false\n          }\n        }, {\n          \"kind\" : \"LITERAL\",\n          \"value\" : \" \",\n          \"type\" : \"CHAR(1) NOT NULL\"\n        }, {\n          \"kind\" : \"CALL\",\n          \"internalName\" : \"$REGEXP_EXTRACT$1\",\n          \"operands\" : [ {\n            \"kind\" : \"INPUT_REF\",\n            \"inputIndex\" : 2,\n            \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n          }, {\n            \"kind\" : \"LITERAL\",\n            \"value\" : \"\\\\d\\\\d?:\\\\d\\\\d\\\\s(AM|PM)\",\n            \"type\" : \"CHAR(19) NOT NULL\"\n          } ],\n          \"type\" : \"VARCHAR(2147483647)\"\n        } ],\n        \"type\" : \"VARCHAR(2147483647)\"\n      } ],\n      \"type\" : \"VARCHAR(2147483647)\"\n    }, {\n      \"kind\" : \"CALL\",\n      \"catalogName\" : \"`default_catalog`.`default_database`.`PARSETIMESTAMP`\",\n      \"operands\" : [ {\n        \"kind\" : \"CALL\",\n        \"internalName\" : \"$CONCAT$1\",\n        \"operands\" : [ {\n          \"kind\" : \"CALL\",\n          \"internalName\" : \"$CONCAT$1\",\n          \"operands\" : [ {\n            \"kind\" : \"CALL\",\n            \"internalName\" : \"$TRIM$1\",\n            \"operands\" : [ {\n              \"kind\" : \"LITERAL\",\n              \"symbol\" : \"TRIM\",\n              \"value\" : \"BOTH\",\n              \"type\" : {\n                \"type\" : \"SYMBOL\",\n                \"nullable\" : false\n              }\n            }, {\n              \"kind\" : \"LITERAL\",\n              \"value\" : \" \",\n              \"type\" : \"CHAR(1) NOT NULL\"\n            }, {\n              \"kind\" : \"CALL\",\n              \"internalName\" : \"$REGEXP_EXTRACT$1\",\n              \"operands\" : [ {\n                \"kind\" : \"INPUT_REF\",\n                \"inputIndex\" : 1,\n                \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n              }, {\n                \"kind\" : \"LITERAL\",\n                \"value\" : \"^[^-]*\",\n                \"type\" : \"CHAR(6) NOT NULL\"\n              } ],\n              \"type\" : \"VARCHAR(2147483647)\"\n            } ],\n            \"type\" : \"VARCHAR(2147483647)\"\n          }, {\n            \"kind\" : \"LITERAL\",\n            \"value\" : \" \",\n            \"type\" : \"CHAR(1) NOT NULL\"\n          }, {\n            \"kind\" : \"CALL\",\n            \"internalName\" : \"$TRIM$1\",\n            \"operands\" : [ {\n              \"kind\" : \"LITERAL\",\n              \"symbol\" : \"TRIM\",\n              \"value\" : \"BOTH\",\n              \"type\" : {\n                \"type\" : \"SYMBOL\",\n                \"nullable\" : false\n              }\n            }, {\n              \"kind\" : \"LITERAL\",\n              \"value\" : \" \",\n              \"type\" : \"CHAR(1) NOT NULL\"\n            }, {\n              \"kind\" : \"CALL\",\n              \"internalName\" : \"$REGEXP_EXTRACT$1\",\n              \"operands\" : [ {\n                \"kind\" : \"INPUT_REF\",\n                \"inputIndex\" : 2,\n                \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n              }, {\n                \"kind\" : \"LITERAL\",\n                \"value\" : \"\\\\d\\\\d?:\\\\d\\\\d\\\\s(AM|PM)\",\n                \"type\" : \"CHAR(19) NOT NULL\"\n              } ],\n              \"type\" : \"VARCHAR(2147483647)\"\n            } ],\n            \"type\" : \"VARCHAR(2147483647)\"\n          } ],\n          \"type\" : \"VARCHAR(2147483647)\"\n        }, {\n          \"kind\" : \"LITERAL\",\n          \"value\" : \" PDT\",\n          \"type\" : \"CHAR(4) NOT NULL\"\n        } ],\n        \"type\" : \"VARCHAR(2147483647)\"\n      }, {\n        \"kind\" : \"LITERAL\",\n        \"value\" : \"MMMM d, yyyy h:mm a z\",\n        \"type\" : \"CHAR(21) NOT NULL\"\n      } ],\n      \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE\"\n    } ],\n    \"condition\" : null,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"url\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"date\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"time\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"title\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"abstract\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"location\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"speakers\",\n        \"fieldType\" : \"RAW('com.datasqrl.json.FlinkJsonType', 'ADFjb20uZGF0YXNxcmwuanNvbi5GbGlua0pzb25UeXBlU2VyaWFsaXplclNuYXBzaG90AAAAAQApY29tLmRhdGFzcXJsLmpzb24uRmxpbmtKc29uVHlwZVNlcmlhbGl6ZXI=')\"\n      }, {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"id\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"full_text\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"embedding\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      }, {\n        \"name\" : \"startTime\",\n        \"fieldType\" : \"VARCHAR(2147483647)\"\n      }, {\n        \"name\" : \"startTimestamp\",\n        \"fieldType\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE\"\n      } ]\n    },\n    \"description\" : \"Calc(select=[url, date, time, title, abstract, location, TOJSON(speakers) AS speakers, last_updated, COALESCE(CAST(REGEXP_EXTRACT(url, '(\\\\d*)$') AS BIGINT), 0) AS id, CONCAT(title, '\\\\n', abstract) AS full_text, ASCIITEXTTESTEMBED(CONCAT(title, '\\\\n', abstract)) AS embedding, CONCAT(TRIM(BOTH, ' ', REGEXP_EXTRACT(date, '^[^-]*')), ' ', TRIM(BOTH, ' ', REGEXP_EXTRACT(time, '\\\\d\\\\d?:\\\\d\\\\d\\\\s(AM|PM)'))) AS startTime, PARSETIMESTAMP(CONCAT(CONCAT(TRIM(BOTH, ' ', REGEXP_EXTRACT(date, '^[^-]*')), ' ', TRIM(BOTH, ' ', REGEXP_EXTRACT(time, '\\\\d\\\\d?:\\\\d\\\\d\\\\s(AM|PM)'))), ' PDT'), 'MMMM d, yyyy h:mm a z') AS startTimestamp])\"\n  }, {\n    \"id\" : 64,\n    \"type\" : \"stream-exec-sink_1\",\n    \"configuration\" : {\n      \"table.exec.sink.keyed-shuffle\" : \"AUTO\",\n      \"table.exec.sink.not-null-enforcer\" : \"ERROR\",\n      \"table.exec.sink.rowtime-inserter\" : \"ENABLED\",\n      \"table.exec.sink.type-length-enforcer\" : \"IGNORE\",\n      \"table.exec.sink.upsert-materialize\" : \"AUTO\"\n    },\n    \"dynamicTableSink\" : {\n      \"table\" : {\n        \"identifier\" : \"`default_catalog`.`default_database`.`events_3`\"\n      }\n    },\n    \"inputChangelogMode\" : [ \"INSERT\" ],\n    \"inputUpsertKey\" : [ 0, 7 ],\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"url\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"date\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"time\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"title\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"abstract\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"location\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"speakers\",\n        \"fieldType\" : \"RAW('com.datasqrl.json.FlinkJsonType', 'ADFjb20uZGF0YXNxcmwuanNvbi5GbGlua0pzb25UeXBlU2VyaWFsaXplclNuYXBzaG90AAAAAQApY29tLmRhdGFzcXJsLmpzb24uRmxpbmtKc29uVHlwZVNlcmlhbGl6ZXI=')\"\n      }, {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"id\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"full_text\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"embedding\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      }, {\n        \"name\" : \"startTime\",\n        \"fieldType\" : \"VARCHAR(2147483647)\"\n      }, {\n        \"name\" : \"startTimestamp\",\n        \"fieldType\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE\"\n      } ]\n    },\n    \"description\" : \"Sink(table=[default_catalog.default_database.events_3], fields=[url, date, time, title, abstract, location, speakers, last_updated, id, full_text, embedding, startTime, startTimestamp])\"\n  }, {\n    \"id\" : 65,\n    \"type\" : \"stream-exec-table-source-scan_1\",\n    \"scanTableSource\" : {\n      \"table\" : {\n        \"identifier\" : \"`default_catalog`.`default_database`.`likes_1`\"\n      }\n    },\n    \"outputType\" : \"ROW<`eventId` BIGINT NOT NULL, `userid` VARCHAR(2147483647) NOT NULL, `liked` BOOLEAN NOT NULL, `_uuid` VARCHAR(2147483647) NOT NULL, `event_time` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL>\",\n    \"description\" : \"TableSourceScan(table=[[default_catalog, default_database, likes_1]], fields=[eventId, userid, liked, _uuid, event_time])\",\n    \"inputProperties\" : [ ]\n  }, {\n    \"id\" : 66,\n    \"type\" : \"stream-exec-watermark-assigner_1\",\n    \"watermarkExpr\" : {\n      \"kind\" : \"CALL\",\n      \"syntax\" : \"BINARY\",\n      \"internalName\" : \"$-$1\",\n      \"operands\" : [ {\n        \"kind\" : \"INPUT_REF\",\n        \"inputIndex\" : 4,\n        \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL\"\n      }, {\n        \"kind\" : \"LITERAL\",\n        \"value\" : \"0\",\n        \"type\" : \"INTERVAL SECOND(6) NOT NULL\"\n      } ],\n      \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL\"\n    },\n    \"rowtimeFieldIndex\" : 4,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"eventId\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"liked\",\n        \"fieldType\" : \"BOOLEAN NOT NULL\"\n      }, {\n        \"name\" : \"_uuid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"WatermarkAssigner(rowtime=[event_time], watermark=[(event_time - 0:INTERVAL SECOND)])\"\n  }, {\n    \"id\" : 67,\n    \"type\" : \"stream-exec-calc_1\",\n    \"projection\" : [ {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 0,\n      \"type\" : \"BIGINT NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 1,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 4,\n      \"type\" : {\n        \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n        \"nullable\" : false,\n        \"precision\" : 3,\n        \"kind\" : \"ROWTIME\"\n      }\n    } ],\n    \"condition\" : {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 2,\n      \"type\" : \"BOOLEAN NOT NULL\"\n    },\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"eventId\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"Calc(select=[eventId, userid, event_time], where=[liked])\"\n  }, {\n    \"id\" : 68,\n    \"type\" : \"stream-exec-exchange_1\",\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"HASH\",\n        \"keys\" : [ 0 ]\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"eventId\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"Exchange(distribution=[hash[eventId]])\"\n  }, {\n    \"id\" : 69,\n    \"type\" : \"stream-exec-calc_1\",\n    \"projection\" : [ {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 0,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 7,\n      \"type\" : {\n        \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n        \"nullable\" : false,\n        \"precision\" : 3,\n        \"kind\" : \"ROWTIME\"\n      }\n    }, {\n      \"kind\" : \"CALL\",\n      \"internalName\" : \"$COALESCE$1\",\n      \"operands\" : [ {\n        \"kind\" : \"CALL\",\n        \"syntax\" : \"SPECIAL\",\n        \"internalName\" : \"$CAST$1\",\n        \"operands\" : [ {\n          \"kind\" : \"CALL\",\n          \"internalName\" : \"$REGEXP_EXTRACT$1\",\n          \"operands\" : [ {\n            \"kind\" : \"INPUT_REF\",\n            \"inputIndex\" : 0,\n            \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n          }, {\n            \"kind\" : \"LITERAL\",\n            \"value\" : \"(\\\\d*)$\",\n            \"type\" : \"CHAR(6) NOT NULL\"\n          } ],\n          \"type\" : \"VARCHAR(2147483647)\"\n        } ],\n        \"type\" : \"BIGINT\"\n      }, {\n        \"kind\" : \"LITERAL\",\n        \"value\" : 0,\n        \"type\" : \"BIGINT NOT NULL\"\n      } ],\n      \"type\" : \"BIGINT NOT NULL\"\n    }, {\n      \"kind\" : \"CALL\",\n      \"catalogName\" : \"`default_catalog`.`default_database`.`ASCIITEXTTESTEMBED`\",\n      \"operands\" : [ {\n        \"kind\" : \"CALL\",\n        \"internalName\" : \"$CONCAT$1\",\n        \"operands\" : [ {\n          \"kind\" : \"INPUT_REF\",\n          \"inputIndex\" : 3,\n          \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n        }, {\n          \"kind\" : \"LITERAL\",\n          \"value\" : \"\\\\n\",\n          \"type\" : \"CHAR(2) NOT NULL\"\n        }, {\n          \"kind\" : \"INPUT_REF\",\n          \"inputIndex\" : 4,\n          \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n        } ],\n        \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n      } ],\n      \"type\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n    } ],\n    \"condition\" : null,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"url\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"$8\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"$10\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      } ]\n    },\n    \"description\" : \"Calc(select=[url, last_updated, COALESCE(CAST(REGEXP_EXTRACT(url, '(\\\\d*)$') AS BIGINT), 0) AS $8, ASCIITEXTTESTEMBED(CONCAT(title, '\\\\n', abstract)) AS $10])\"\n  }, {\n    \"id\" : 70,\n    \"type\" : \"stream-exec-exchange_1\",\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"HASH\",\n        \"keys\" : [ 2 ]\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"url\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"$8\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"$10\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      } ]\n    },\n    \"description\" : \"Exchange(distribution=[hash[$8]])\"\n  }, {\n    \"id\" : 71,\n    \"type\" : \"stream-exec-deduplicate_1\",\n    \"configuration\" : {\n      \"table.exec.deduplicate.insert-update-after-sensitive-enabled\" : \"true\",\n      \"table.exec.deduplicate.mini-batch.compact-changes-enabled\" : \"false\",\n      \"table.exec.mini-batch.enabled\" : \"false\",\n      \"table.exec.mini-batch.size\" : \"-1\"\n    },\n    \"uniqueKeys\" : [ 2 ],\n    \"isRowtime\" : true,\n    \"keepLastRow\" : true,\n    \"generateUpdateBefore\" : false,\n    \"state\" : [ {\n      \"index\" : 0,\n      \"ttl\" : \"0 ms\",\n      \"name\" : \"deduplicateState\"\n    } ],\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"url\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"$8\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"$10\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      } ]\n    },\n    \"description\" : \"Deduplicate(keep=[LastRow], key=[$8], order=[ROWTIME])\"\n  }, {\n    \"id\" : 72,\n    \"type\" : \"stream-exec-calc_1\",\n    \"projection\" : [ {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 1,\n      \"type\" : {\n        \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n        \"nullable\" : false,\n        \"precision\" : 3,\n        \"kind\" : \"ROWTIME\"\n      }\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 2,\n      \"type\" : \"BIGINT NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 3,\n      \"type\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n    } ],\n    \"condition\" : null,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"id\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"embedding\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      } ]\n    },\n    \"description\" : \"Calc(select=[last_updated, $8 AS id, $10 AS embedding])\"\n  }, {\n    \"id\" : 73,\n    \"type\" : \"stream-exec-exchange_1\",\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"HASH\",\n        \"keys\" : [ 1 ]\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"id\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"embedding\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      } ]\n    },\n    \"description\" : \"Exchange(distribution=[hash[id]])\"\n  }, {\n    \"id\" : 74,\n    \"type\" : \"stream-exec-temporal-join_1\",\n    \"joinSpec\" : {\n      \"joinType\" : \"INNER\",\n      \"leftKeys\" : [ 0 ],\n      \"rightKeys\" : [ 1 ],\n      \"filterNulls\" : [ true ],\n      \"nonEquiCondition\" : null\n    },\n    \"isTemporalFunctionJoin\" : false,\n    \"leftTimeAttributeIndex\" : 2,\n    \"rightTimeAttributeIndex\" : 0,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    }, {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"eventId\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"last_updated\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      }, {\n        \"name\" : \"id\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"embedding\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      } ]\n    },\n    \"description\" : \"TemporalJoin(joinType=[InnerJoin], where=[((eventId = id) AND __TEMPORAL_JOIN_CONDITION(event_time, last_updated, __TEMPORAL_JOIN_CONDITION_PRIMARY_KEY(id), __TEMPORAL_JOIN_LEFT_KEY(eventId), __TEMPORAL_JOIN_RIGHT_KEY(id)))], select=[eventId, userid, event_time, last_updated, id, embedding])\"\n  }, {\n    \"id\" : 75,\n    \"type\" : \"stream-exec-calc_1\",\n    \"projection\" : [ {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 1,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 5,\n      \"type\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 2,\n      \"type\" : {\n        \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n        \"nullable\" : false,\n        \"precision\" : 3,\n        \"kind\" : \"ROWTIME\"\n      }\n    } ],\n    \"condition\" : null,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"embedding\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"Calc(select=[userid, embedding, event_time])\"\n  }, {\n    \"id\" : 76,\n    \"type\" : \"stream-exec-table-source-scan_1\",\n    \"scanTableSource\" : {\n      \"table\" : {\n        \"identifier\" : \"`default_catalog`.`default_database`.`addinterest_1`\"\n      }\n    },\n    \"outputType\" : \"ROW<`text` VARCHAR(2147483647) NOT NULL, `userid` VARCHAR(2147483647) NOT NULL, `_uuid` VARCHAR(2147483647) NOT NULL, `event_time` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL>\",\n    \"description\" : \"TableSourceScan(table=[[default_catalog, default_database, addinterest_1]], fields=[text, userid, _uuid, event_time])\",\n    \"inputProperties\" : [ ]\n  }, {\n    \"id\" : 77,\n    \"type\" : \"stream-exec-watermark-assigner_1\",\n    \"watermarkExpr\" : {\n      \"kind\" : \"CALL\",\n      \"syntax\" : \"BINARY\",\n      \"internalName\" : \"$-$1\",\n      \"operands\" : [ {\n        \"kind\" : \"INPUT_REF\",\n        \"inputIndex\" : 3,\n        \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL\"\n      }, {\n        \"kind\" : \"LITERAL\",\n        \"value\" : \"0\",\n        \"type\" : \"INTERVAL SECOND(6) NOT NULL\"\n      } ],\n      \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL\"\n    },\n    \"rowtimeFieldIndex\" : 3,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"text\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"_uuid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"WatermarkAssigner(rowtime=[event_time], watermark=[(event_time - 0:INTERVAL SECOND)])\"\n  }, {\n    \"id\" : 78,\n    \"type\" : \"stream-exec-calc_1\",\n    \"projection\" : [ {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 1,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"CALL\",\n      \"catalogName\" : \"`default_catalog`.`default_database`.`ASCIITEXTTESTEMBED`\",\n      \"operands\" : [ {\n        \"kind\" : \"INPUT_REF\",\n        \"inputIndex\" : 0,\n        \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n      } ],\n      \"type\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 3,\n      \"type\" : {\n        \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n        \"nullable\" : false,\n        \"precision\" : 3,\n        \"kind\" : \"ROWTIME\"\n      }\n    } ],\n    \"condition\" : null,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"embedding\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"Calc(select=[userid, ASCIITEXTTESTEMBED(text) AS embedding, event_time])\"\n  }, {\n    \"id\" : 79,\n    \"type\" : \"stream-exec-union_1\",\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    }, {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"embedding\",\n        \"fieldType\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"Union(all=[true], union=[userid, embedding, event_time])\"\n  }, {\n    \"id\" : 80,\n    \"type\" : \"stream-exec-calc_1\",\n    \"projection\" : [ {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 0,\n      \"type\" : \"VARCHAR(2147483647) NOT NULL\"\n    }, {\n      \"kind\" : \"INPUT_REF\",\n      \"inputIndex\" : 1,\n      \"type\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n    }, {\n      \"kind\" : \"CALL\",\n      \"syntax\" : \"SPECIAL\",\n      \"internalName\" : \"$CAST$1\",\n      \"operands\" : [ {\n        \"kind\" : \"INPUT_REF\",\n        \"inputIndex\" : 2,\n        \"type\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ],\n      \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL\"\n    } ],\n    \"condition\" : null,\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : \"ROW<`userid` VARCHAR(2147483647) NOT NULL, `embedding` RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg=='), `event_time` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL>\",\n    \"description\" : \"Calc(select=[userid, embedding, CAST(event_time AS TIMESTAMP_WITH_LOCAL_TIME_ZONE(3)) AS event_time])\"\n  }, {\n    \"id\" : 81,\n    \"type\" : \"stream-exec-exchange_1\",\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"HASH\",\n        \"keys\" : [ 0 ]\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : \"ROW<`userid` VARCHAR(2147483647) NOT NULL, `embedding` RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg=='), `event_time` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL>\",\n    \"description\" : \"Exchange(distribution=[hash[userid]])\"\n  }, {\n    \"id\" : 82,\n    \"type\" : \"stream-exec-group-aggregate_1\",\n    \"configuration\" : {\n      \"table.exec.mini-batch.enabled\" : \"false\",\n      \"table.exec.mini-batch.size\" : \"-1\"\n    },\n    \"grouping\" : [ 0 ],\n    \"aggCalls\" : [ {\n      \"name\" : \"interestVector\",\n      \"catalogName\" : \"`default_catalog`.`default_database`.`CENTER`\",\n      \"argList\" : [ 1 ],\n      \"filterArg\" : -1,\n      \"distinct\" : false,\n      \"approximate\" : false,\n      \"ignoreNulls\" : false,\n      \"type\" : \"RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg==')\"\n    }, {\n      \"name\" : \"__timestamp\",\n      \"internalName\" : \"$MAX$1\",\n      \"argList\" : [ 2 ],\n      \"filterArg\" : -1,\n      \"distinct\" : false,\n      \"approximate\" : false,\n      \"ignoreNulls\" : false,\n      \"type\" : \"TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL\"\n    } ],\n    \"aggCallNeedRetractions\" : [ false, false ],\n    \"generateUpdateBefore\" : false,\n    \"needRetraction\" : false,\n    \"state\" : [ {\n      \"index\" : 0,\n      \"ttl\" : \"0 ms\",\n      \"name\" : \"groupAggregateState\"\n    } ],\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : \"ROW<`userid` VARCHAR(2147483647) NOT NULL, `interestVector` RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg=='), `__timestamp` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL>\",\n    \"description\" : \"GroupAggregate(groupBy=[userid], select=[userid, CENTER(embedding) AS interestVector, MAX(event_time) AS __timestamp])\"\n  }, {\n    \"id\" : 83,\n    \"type\" : \"stream-exec-sink_1\",\n    \"configuration\" : {\n      \"table.exec.sink.keyed-shuffle\" : \"AUTO\",\n      \"table.exec.sink.not-null-enforcer\" : \"ERROR\",\n      \"table.exec.sink.rowtime-inserter\" : \"ENABLED\",\n      \"table.exec.sink.type-length-enforcer\" : \"IGNORE\",\n      \"table.exec.sink.upsert-materialize\" : \"AUTO\"\n    },\n    \"dynamicTableSink\" : {\n      \"table\" : {\n        \"identifier\" : \"`default_catalog`.`default_database`.`userinterests_1`\"\n      }\n    },\n    \"inputChangelogMode\" : [ \"INSERT\", \"UPDATE_AFTER\" ],\n    \"inputUpsertKey\" : [ 0 ],\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : \"ROW<`userid` VARCHAR(2147483647) NOT NULL, `interestVector` RAW('com.datasqrl.vector.FlinkVectorType', 'ADVjb20uZGF0YXNxcmwudmVjdG9yLkZsaW5rVmVjdG9yVHlwZVNlcmlhbGl6ZXJTbmFwc2hvdAAAAAEALWNvbS5kYXRhc3FybC52ZWN0b3IuRmxpbmtWZWN0b3JUeXBlU2VyaWFsaXplcg=='), `__timestamp` TIMESTAMP(3) WITH LOCAL TIME ZONE NOT NULL>\",\n    \"description\" : \"Sink(table=[default_catalog.default_database.userinterests_1], fields=[userid, interestVector, __timestamp])\"\n  }, {\n    \"id\" : 84,\n    \"type\" : \"stream-exec-sink_1\",\n    \"configuration\" : {\n      \"table.exec.sink.keyed-shuffle\" : \"AUTO\",\n      \"table.exec.sink.not-null-enforcer\" : \"ERROR\",\n      \"table.exec.sink.rowtime-inserter\" : \"ENABLED\",\n      \"table.exec.sink.type-length-enforcer\" : \"IGNORE\",\n      \"table.exec.sink.upsert-materialize\" : \"AUTO\"\n    },\n    \"dynamicTableSink\" : {\n      \"table\" : {\n        \"identifier\" : \"`default_catalog`.`default_database`.`userlikes_1`\"\n      }\n    },\n    \"inputChangelogMode\" : [ \"INSERT\" ],\n    \"inputProperties\" : [ {\n      \"requiredDistribution\" : {\n        \"type\" : \"UNKNOWN\"\n      },\n      \"damBehavior\" : \"PIPELINED\",\n      \"priority\" : 0\n    } ],\n    \"outputType\" : {\n      \"type\" : \"ROW\",\n      \"fields\" : [ {\n        \"name\" : \"eventId\",\n        \"fieldType\" : \"BIGINT NOT NULL\"\n      }, {\n        \"name\" : \"userid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"liked\",\n        \"fieldType\" : \"BOOLEAN NOT NULL\"\n      }, {\n        \"name\" : \"_uuid\",\n        \"fieldType\" : \"VARCHAR(2147483647) NOT NULL\"\n      }, {\n        \"name\" : \"event_time\",\n        \"fieldType\" : {\n          \"type\" : \"TIMESTAMP_WITH_LOCAL_TIME_ZONE\",\n          \"nullable\" : false,\n          \"precision\" : 3,\n          \"kind\" : \"ROWTIME\"\n        }\n      } ]\n    },\n    \"description\" : \"Sink(table=[default_catalog.default_database.userlikes_1], fields=[eventId, userid, liked, _uuid, event_time])\"\n  } ],\n  \"edges\" : [ {\n    \"source\" : 61,\n    \"target\" : 62,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 62,\n    \"target\" : 63,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 63,\n    \"target\" : 64,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 65,\n    \"target\" : 66,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 66,\n    \"target\" : 67,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 67,\n    \"target\" : 68,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 62,\n    \"target\" : 69,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 69,\n    \"target\" : 70,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 70,\n    \"target\" : 71,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 71,\n    \"target\" : 72,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 72,\n    \"target\" : 73,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 68,\n    \"target\" : 74,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 73,\n    \"target\" : 74,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 74,\n    \"target\" : 75,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 76,\n    \"target\" : 77,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 77,\n    \"target\" : 78,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 75,\n    \"target\" : 79,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 78,\n    \"target\" : 79,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 79,\n    \"target\" : 80,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 80,\n    \"target\" : 81,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 81,\n    \"target\" : 82,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 82,\n    \"target\" : 83,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  }, {\n    \"source\" : 66,\n    \"target\" : 84,\n    \"shuffle\" : {\n      \"type\" : \"FORWARD\"\n    },\n    \"shuffleMode\" : \"PIPELINED\"\n  } ]\n}"
}
>>>kafka.json
{
  "topics" : [
    {
      "name" : "conference-addinterest",
      "numPartitions" : 1,
      "replicationFactor" : 1,
      "replicasAssignments" : { },
      "config" : { }
    },
    {
      "name" : "conference-likes",
      "numPartitions" : 1,
      "replicationFactor" : 1,
      "replicasAssignments" : { },
      "config" : { }
    }
  ]
}
>>>postgres.json
{
  "ddl" : [
    {
      "sql" : "CREATE EXTENSION IF NOT EXISTS vector;"
    },
    {
      "name" : "events_3",
      "columns" : [
        "\"url\" TEXT NOT NULL",
        "\"date\" TEXT NOT NULL",
        "\"time\" TEXT NOT NULL",
        "\"title\" TEXT NOT NULL",
        "\"abstract\" TEXT NOT NULL",
        "\"location\" TEXT NOT NULL",
        "\"speakers\" JSONB NOT NULL",
        "\"last_updated\" TIMESTAMP WITH TIME ZONE NOT NULL",
        "\"id\" BIGINT NOT NULL",
        "\"full_text\" TEXT NOT NULL",
        "\"embedding\" VECTOR ",
        "\"startTime\" TEXT ",
        "\"startTimestamp\" TIMESTAMP WITH TIME ZONE "
      ],
      "primaryKeys" : [
        "\"id\""
      ],
      "sql" : "CREATE TABLE IF NOT EXISTS events_3 (\"url\" TEXT NOT NULL,\"date\" TEXT NOT NULL,\"time\" TEXT NOT NULL,\"title\" TEXT NOT NULL,\"abstract\" TEXT NOT NULL,\"location\" TEXT NOT NULL,\"speakers\" JSONB NOT NULL,\"last_updated\" TIMESTAMP WITH TIME ZONE NOT NULL,\"id\" BIGINT NOT NULL,\"full_text\" TEXT NOT NULL,\"embedding\" VECTOR ,\"startTime\" TEXT ,\"startTimestamp\" TIMESTAMP WITH TIME ZONE  , PRIMARY KEY (\"id\"));"
    },
    {
      "name" : "userinterests_1",
      "columns" : [
        "\"userid\" TEXT NOT NULL",
        "\"interestVector\" VECTOR ",
        "\"__timestamp\" TIMESTAMP WITH TIME ZONE NOT NULL"
      ],
      "primaryKeys" : [
        "\"userid\""
      ],
      "sql" : "CREATE TABLE IF NOT EXISTS userinterests_1 (\"userid\" TEXT NOT NULL,\"interestVector\" VECTOR ,\"__timestamp\" TIMESTAMP WITH TIME ZONE NOT NULL , PRIMARY KEY (\"userid\"));"
    },
    {
      "name" : "userlikes_1",
      "columns" : [
        "\"eventId\" BIGINT NOT NULL",
        "\"userid\" TEXT NOT NULL",
        "\"liked\" BOOLEAN NOT NULL",
        "\"_uuid\" TEXT NOT NULL",
        "\"event_time\" TIMESTAMP WITH TIME ZONE NOT NULL"
      ],
      "primaryKeys" : [
        "\"userid\"",
        "\"eventId\""
      ],
      "sql" : "CREATE TABLE IF NOT EXISTS userlikes_1 (\"eventId\" BIGINT NOT NULL,\"userid\" TEXT NOT NULL,\"liked\" BOOLEAN NOT NULL,\"_uuid\" TEXT NOT NULL,\"event_time\" TIMESTAMP WITH TIME ZONE NOT NULL , PRIMARY KEY (\"userid\",\"eventId\"));"
    },
    {
      "indexName" : "events_3_text_c3c4",
      "tableName" : "events_3",
      "columns" : [
        "title",
        "abstract"
      ],
      "type" : "TEXT",
      "sql" : "CREATE INDEX IF NOT EXISTS events_3_text_c3c4 ON events_3 USING GIN (to_tsvector('english', coalesce(\"title\", '') || ' ' || coalesce(\"abstract\", '') ));"
    }
  ],
  "views" : [
    {
      "name" : "Events",
      "sql" : "CREATE OR REPLACE VIEW \"Events\"(\"url\", \"date\", \"time\", \"title\", \"abstract\", \"location\", \"speakers\", \"last_updated\", \"id\", \"full_text\", \"embedding\", \"startTime\", \"startTimestamp\") AS SELECT *\nFROM \"events_3\"\nORDER BY \"id\";"
    }
  ]
}
>>>vertx.json
{
  "model" : {
    "coords" : [
      {
        "type" : "args",
        "parentType" : "Query",
        "fieldName" : "Events",
        "matchs" : [
          {
            "arguments" : [
              {
                "type" : "variable",
                "type" : "variable",
                "path" : "limit"
              },
              {
                "type" : "variable",
                "type" : "variable",
                "path" : "offset"
              }
            ],
            "query" : {
              "type" : "PagedJdbcQuery",
              "type" : "PagedJdbcQuery",
              "sql" : "SELECT *\nFROM \"events_3\"\nORDER BY \"id\"",
              "parameters" : [ ]
            }
          }
        ]
      },
      {
        "type" : "args",
        "parentType" : "Query",
        "fieldName" : "EventsLiked",
        "matchs" : [
          {
            "arguments" : [
              {
                "type" : "variable",
                "type" : "variable",
                "path" : "userid"
              }
            ],
            "query" : {
              "type" : "JdbcQuery",
              "type" : "JdbcQuery",
              "sql" : "SELECT \"events_3\".\"url\", \"events_3\".\"date\", \"events_3\".\"time\", \"events_3\".\"title\", \"events_3\".\"abstract\", \"events_3\".\"location\", \"events_3\".\"speakers\", \"events_3\".\"last_updated\", \"events_3\".\"id\", \"events_3\".\"full_text\", \"events_3\".\"embedding\", \"events_3\".\"startTime\", \"events_3\".\"startTimestamp\", \"t\".\"eventId\" AS \"_eventId\"\nFROM (SELECT *\n  FROM \"userlikes_1\"\n  WHERE \"userid\" = $1) AS \"t\"\n INNER JOIN \"events_3\" ON \"t\".\"eventId\" = \"events_3\".\"id\"\nORDER BY \"events_3\".\"startTimestamp\", \"t\".\"eventId\"",
              "parameters" : [
                {
                  "type" : "arg",
                  "type" : "arg",
                  "path" : "userid"
                }
              ]
            }
          }
        ]
      },
      {
        "type" : "args",
        "parentType" : "Query",
        "fieldName" : "RecommendedEvents",
        "matchs" : [
          {
            "arguments" : [
              {
                "type" : "variable",
                "type" : "variable",
                "path" : "userid"
              },
              {
                "type" : "variable",
                "type" : "variable",
                "path" : "limit"
              }
            ],
            "query" : {
              "type" : "PagedJdbcQuery",
              "type" : "PagedJdbcQuery",
              "sql" : "SELECT \"events_3\".\"url\", \"events_3\".\"date\", \"events_3\".\"time\", \"events_3\".\"title\", \"events_3\".\"abstract\", \"events_3\".\"location\", \"events_3\".\"speakers\", \"events_3\".\"last_updated\", \"events_3\".\"id\", \"events_3\".\"full_text\", \"events_3\".\"embedding\", \"events_3\".\"startTime\", \"events_3\".\"startTimestamp\", 1 - (\"t\".\"interestVector\" <=> \"events_3\".\"embedding\") AS \"score\"\nFROM (SELECT *\n  FROM \"userinterests_1\"\n  WHERE \"userid\" = $1) AS \"t\",\n \"events_3\"\nORDER BY 1 - (\"t\".\"interestVector\" <=> \"events_3\".\"embedding\") DESC, \"events_3\".\"id\"",
              "parameters" : [
                {
                  "type" : "arg",
                  "type" : "arg",
                  "path" : "userid"
                }
              ]
            }
          }
        ]
      },
      {
        "type" : "args",
        "parentType" : "Query",
        "fieldName" : "PersonalizedEventSearch",
        "matchs" : [
          {
            "arguments" : [
              {
                "type" : "variable",
                "type" : "variable",
                "path" : "query"
              },
              {
                "type" : "variable",
                "type" : "variable",
                "path" : "userid"
              },
              {
                "type" : "variable",
                "type" : "variable",
                "path" : "limit"
              }
            ],
            "query" : {
              "type" : "PagedJdbcQuery",
              "type" : "PagedJdbcQuery",
              "sql" : "SELECT \"t\".\"url\", \"t\".\"date\", \"t\".\"time\", \"t\".\"title\", \"t\".\"abstract\", \"t\".\"location\", \"t\".\"speakers\", \"t\".\"last_updated\", \"t\".\"id\", \"t\".\"full_text\", \"t\".\"embedding\", \"t\".\"startTime\", \"t\".\"startTimestamp\", COALESCE(1 - (\"t0\".\"interestVector\" <=> \"t\".\"embedding\"), 0.0) AS \"score\"\nFROM (SELECT *\n  FROM \"events_3\"\n  WHERE (TO_TSVECTOR('english', COALESCE(\"title\", ' ') || ' ' || COALESCE(\"abstract\", ' ')) @@ WEBSEARCH_TO_TSQUERY('english', $1))) AS \"t\"\n LEFT JOIN (SELECT *\n  FROM \"userinterests_1\"\n  WHERE \"userid\" = $2) AS \"t0\" ON TRUE\nORDER BY COALESCE(1 - (\"t0\".\"interestVector\" <=> \"t\".\"embedding\"), 0.0) DESC, \"t\".\"id\"",
              "parameters" : [
                {
                  "type" : "arg",
                  "type" : "arg",
                  "path" : "query"
                },
                {
                  "type" : "arg",
                  "type" : "arg",
                  "path" : "userid"
                }
              ]
            }
          }
        ]
      }
    ],
    "mutations" : [
      {
        "type" : "kafka",
        "fieldName" : "Likes",
        "topic" : "conference-likes",
        "sinkConfig" : { }
      },
      {
        "type" : "kafka",
        "fieldName" : "AddInterest",
        "topic" : "conference-addinterest",
        "sinkConfig" : { }
      }
    ],
    "subscriptions" : [ ],
    "schema" : {
      "type" : "string",
      "type" : "string",
      "schema" : "scalar DateTime\n\ntype Query {\n    Events(limit: Int!, offset: Int = 0): [Events!]!\n    EventsLiked(userid: String!): [EventsLiked!]!\n    RecommendedEvents(userid: String!, limit: Int!=10): [RecommendedEvents!]\n    PersonalizedEventSearch(query: String!, userid: String!, limit: Int!=10): [PersonalizedEventSearch!]\n}\n\n\ninterface AbstractEvents {\n    id : Int!\n    date: String!\n    time : String!\n    location: String!\n    title : String!\n    abstract : String!\n    url : String!\n    startTimestamp : String!\n}\n\ntype speakers {\n    name : String!\n    title: String\n    company: String\n}\n\ntype LikeCount {\n    num : Int\n}\n\ntype Events implements AbstractEvents{\n    id : Int!\n    date: String!\n    time : String!\n    location: String!\n    title : String!\n    abstract : String!\n    url : String!\n    startTimestamp : String!\n    speakers : [speakers!]\n}\n\ntype RecommendedEvents implements AbstractEvents{\n    id : Int!\n    date: String!\n    time : String!\n    location: String!\n    title : String!\n    abstract : String!\n    url : String!\n    startTimestamp : String!\n    score: Float!\n}\n\ntype PersonalizedEventSearch implements AbstractEvents{\n    id : Int!\n    date: String!\n    time : String!\n    location: String!\n    title : String!\n    abstract : String!\n    url : String!\n    startTimestamp : String!\n    score: Float!\n}\n\ntype EventsLiked implements AbstractEvents{\n    id : Int!\n    date: String!\n    time : String!\n    location: String!\n    title : String!\n    abstract : String!\n    url : String!\n    startTimestamp : String!\n}\n\n\n\ntype Mutation {\n    Likes(liked: LikedInput!): LikeAdded\n    AddInterest(interest: AddInterest!): InterestAdded\n}\n\ninput AddInterest {\n    text: String!\n    userid: String!\n}\n\ntype InterestAdded {\n    userid: String!\n}\n\ninput LikedInput {\n    eventId: Int!\n    userid: String!\n    liked: Boolean!\n}\n\ntype LikeAdded {\n    event_time: String!\n    userid: String!\n}"
    }
  }
}
