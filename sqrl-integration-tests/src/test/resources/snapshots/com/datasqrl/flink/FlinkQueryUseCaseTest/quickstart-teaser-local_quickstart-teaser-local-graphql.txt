>>>database
CREATE INDEX IF NOT EXISTS orders$3_hash_c4 ON orders$3 USING hash (time);
CREATE TABLE IF NOT EXISTS items$4 (_uuid VARCHAR NOT NULL,_idx BIGINT NOT NULL,productid BIGINT NOT NULL,quantity BIGINT NOT NULL,unit_price DECIMAL NOT NULL,discount DECIMAL ,total DECIMAL NOT NULL,time TIMESTAMPTZ NOT NULL , PRIMARY KEY (_uuid,_idx));
CREATE TABLE IF NOT EXISTS orders$3 (_uuid VARCHAR NOT NULL,_ingest_time TIMESTAMPTZ NOT NULL,id BIGINT NOT NULL,customerid BIGINT NOT NULL,time TIMESTAMPTZ NOT NULL , PRIMARY KEY (_uuid));
CREATE TABLE IF NOT EXISTS spending$10 (__pk_0 BIGINT NOT NULL,week TIMESTAMPTZ NOT NULL,spend DECIMAL NOT NULL,saved DECIMAL NOT NULL , PRIMARY KEY (__pk_0,week));
CREATE TABLE IF NOT EXISTS totals$6 (__pk_0 VARCHAR NOT NULL,price DECIMAL NOT NULL,saving DECIMAL NOT NULL,time TIMESTAMPTZ NOT NULL , PRIMARY KEY (__pk_0));
CREATE TABLE IF NOT EXISTS users$8 (id BIGINT NOT NULL,time TIMESTAMPTZ NOT NULL , PRIMARY KEY (id));
>>>query-orders
{
  "data" : {
    "Orders" : [ {
      "id" : 150000986,
      "time" : "2023-02-22T02:43:09.852Z",
      "items" : [ {
        "productid" : 16,
        "quantity" : 1,
        "unit_price" : 18.64,
        "discount" : null,
        "total" : 18.64
      }, {
        "productid" : 189,
        "quantity" : 2,
        "unit_price" : 5.75,
        "discount" : null,
        "total" : 11.5
      }, {
        "productid" : 55,
        "quantity" : 1,
        "unit_price" : 12.22,
        "discount" : null,
        "total" : 12.22
      } ]
    }, {
      "id" : 150001008,
      "time" : "2023-02-22T01:07:18.370Z",
      "items" : [ {
        "productid" : 24,
        "quantity" : 1,
        "unit_price" : 5.02,
        "discount" : null,
        "total" : 5.02
      } ]
    } ]
  }
}
>>>query-user
{
  "data" : {
    "Users" : {
      "spending" : [ {
        "week" : "2023-02-23T15:59:59.999Z",
        "spend" : 54.82,
        "saved" : 24.58
      }, {
        "week" : "2023-02-16T15:59:59.999Z",
        "spend" : 60.75,
        "saved" : 0.0
      }, {
        "week" : "2023-02-09T15:59:59.999Z",
        "spend" : 10.64,
        "saved" : 0.0
      }, {
        "week" : "2023-02-02T15:59:59.999Z",
        "spend" : 151.61,
        "saved" : 76.97
      }, {
        "week" : "2023-01-26T15:59:59.999Z",
        "spend" : 103.73,
        "saved" : 9.46
      }, {
        "week" : "2023-01-19T15:59:59.999Z",
        "spend" : 66.6,
        "saved" : 6.51
      }, {
        "week" : "2023-01-12T15:59:59.999Z",
        "spend" : 252.11,
        "saved" : 18.42
      }, {
        "week" : "2023-01-05T15:59:59.999Z",
        "spend" : 10.62,
        "saved" : 0.0
      } ],
      "purchases" : [ {
        "id" : 150000889,
        "time" : "2023-02-15T18:46:53.983Z",
        "totals" : {
          "price" : 14.04,
          "saving" : 0.0
        }
      }, {
        "id" : 150000200,
        "time" : "2023-01-11T16:37:30.966Z",
        "totals" : {
          "price" : 31.41,
          "saving" : 8.22
        }
      }, {
        "id" : 150000724,
        "time" : "2023-02-07T11:55:00.446Z",
        "totals" : {
          "price" : 10.64,
          "saving" : 0.0
        }
      }, {
        "id" : 150000450,
        "time" : "2023-01-25T11:48:36.627Z",
        "totals" : {
          "price" : 9.21,
          "saving" : 0.0
        }
      }, {
        "id" : 150000127,
        "time" : "2023-01-07T16:15:06.848Z",
        "totals" : {
          "price" : 5.03,
          "saving" : 0.0
        }
      } ]
    }
  }
}
