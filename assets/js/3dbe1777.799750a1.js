"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[8015],{5863:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"interface","title":"Designing the Interface","description":"Based on the SQRL script, DataSQRL generates the interface for the compiled data pipeline. DataSQRL supports the following interfaces:","source":"@site/docs/interface.md","sourceDirName":".","slug":"/interface","permalink":"/docs/interface","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u2699\ufe0f Configuration","permalink":"/docs/configuration"},"next":{"title":"Functions","permalink":"/docs/functions"}}');var s=i(4848),r=i(8453);const a={},o="Designing the Interface",c={},d=[{value:"Data Products",id:"data-products",level:2},{value:"APIs",id:"apis",level:2},{value:"GraphQL",id:"graphql",level:3},{value:"MCP and REST",id:"mcp-and-rest",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"designing-the-interface",children:"Designing the Interface"})}),"\n",(0,s.jsx)(n.p,{children:"Based on the SQRL script, DataSQRL generates the interface for the compiled data pipeline. DataSQRL supports the following interfaces:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"GraphQL (Mutations, Queries, and Subscriptions)"}),"\n",(0,s.jsx)(n.li,{children:"MCP (Tooling and Resources)"}),"\n",(0,s.jsx)(n.li,{children:"REST (GET and POST)"}),"\n",(0,s.jsx)(n.li,{children:"Data Product (Data Lake and Database Views)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The first three are APIs that can be invoked programmatically. These generated API interfaces are configured by the ",(0,s.jsx)(n.code,{children:"protocols"})," ",(0,s.jsx)(n.a,{href:"/docs/configuration#compiler-compiler",children:"compiler configuration"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["For data products, DataSQRL generates view definitions as deployment assets in ",(0,s.jsx)(n.code,{children:"build/deploy/plan"})," which can be queried directly."]}),"\n",(0,s.jsx)(n.h2,{id:"data-products",children:"Data Products"}),"\n",(0,s.jsx)(n.p,{children:"For data products, each visible table defined in the SQRL script is exposed as a view or physical table depending on the pipeline optimization. The mapping between visible tables in the SQRL script and exposed tables in the interface is 1-to-1."}),"\n",(0,s.jsxs)(n.p,{children:["We recommend generating unique table names for the physical tables by configuring a table-name suffix in the ",(0,s.jsx)(n.a,{href:"configuration#connectors-connectors",children:"connector configuration"}),", e.g. by configuring the ",(0,s.jsx)(n.code,{children:"table-name"})," for ",(0,s.jsx)(n.code,{children:"postgres"})," or the ",(0,s.jsx)(n.code,{children:"catalog-name"})," for ",(0,s.jsx)(n.code,{children:"iceberg"})," to ",(0,s.jsx)(n.code,{children:"${sqrl:table-name}_MY_SUFFIX"})," . This separates views from physical tables to provide modularity and support updates without impacting downstream consumers."]}),"\n",(0,s.jsx)(n.h2,{id:"apis",children:"APIs"}),"\n",(0,s.jsx)(n.h3,{id:"graphql",children:"GraphQL"}),"\n",(0,s.jsxs)(n.p,{children:["DataSQRL uses the GraphQL data model as the base model for all API access to data. The ",(0,s.jsx)(n.a,{href:"/docs/sqrl-language#api-mapping",children:"SQRL language specification"})," defines how the tables and relationships in the SQRL script map to GraphQL types and fields, as well as how tables map to queries, mutations, and subscriptions."]}),"\n",(0,s.jsxs)(n.p,{children:["To generate the GraphQL schema from a SQRL script, add the ",(0,s.jsx)(n.code,{children:"--api graphql"})," option to the ",(0,s.jsx)(n.a,{href:"/docs/compiler#compile-command",children:"compile command"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"You can customize the GraphQL schema by:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Changing field cardinalities (e.g. ",(0,s.jsx)(n.code,{children:"[Person]!"})," to ",(0,s.jsx)(n.code,{children:"Person!"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Changing scalar types (e.g. ",(0,s.jsx)(n.code,{children:"Long"})," to ",(0,s.jsx)(n.code,{children:"Int"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Changing the argument name for mutations (e.g. ",(0,s.jsx)(n.code,{children:"event"})," to ",(0,s.jsx)(n.code,{children:"payload"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Changing the type of fields to compatible types (e.g. ",(0,s.jsx)(n.code,{children:"Person"})," to ",(0,s.jsx)(n.code,{children:"SpecificPerson"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Adding enums"}),"\n",(0,s.jsx)(n.li,{children:"Adding interfaces and structuring types with interfaces"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["Changes must be compatible with the underlying data as defined in the SQRL script and the ",(0,s.jsx)(n.a,{href:"/docs/sqrl-language#api-mapping",children:"API mapping"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["To use a customized GraphQL schema, configure the schema explicitly in the ",(0,s.jsx)(n.a,{href:"/docs/configuration#script-script",children:"script configuration"})," or by providing it as a ",(0,s.jsx)(n.a,{href:"/docs/compiler",children:"command argument"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"mcp-and-rest",children:"MCP and REST"}),"\n",(0,s.jsxs)(n.p,{children:["DataSQRL generates a list of operations from the GraphQL schema: one for each query and mutation endpoint.\nQueries are mapped to MCP tools with a ",(0,s.jsx)(n.code,{children:"Get"})," prefix and REST endpoints under ",(0,s.jsx)(n.code,{children:"rest/queries"}),". If the arguments are simple scalars, the REST endpoint is GET with URL parameters, otherwise POST with the arguments as payload.\nMutations are mapped to MCP tools with an ",(0,s.jsx)(n.code,{children:"Add"})," prefix and REST POST endpoints under ",(0,s.jsx)(n.code,{children:"rest/mutations"}),".\nFor the result set, DataSQRL follows relationship fields up to a configured depth (and without loops)."]}),"\n",(0,s.jsxs)(n.p,{children:["You can control the default operation generation with the ",(0,s.jsx)(n.a,{href:"/docs/configuration#compiler-compiler",children:"compiler configuration"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"For complete control over the exposed MCP tools and resources as well as REST endpoints, you can define the operations explicitly in a separate GraphQL file (or multiple files)."}),"\n",(0,s.jsx)(n.p,{children:"The GraphQL file defining the operations contains one or multiple query or mutation queries.\nThe name of the operation is the name of the MCP tool and REST endpoint."}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"@api"})," directive controls how the operation is exposed:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rest"}),": ",(0,s.jsx)(n.code,{children:"NONE"}),", ",(0,s.jsx)(n.code,{children:"GET"}),", or ",(0,s.jsx)(n.code,{children:"POST"})," to configure the HTTP method or not expose as REST endpoint."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"mcp"}),": ",(0,s.jsx)(n.code,{children:"NONE"}),", ",(0,s.jsx)(n.code,{children:"TOOL"}),", or ",(0,s.jsx)(n.code,{children:"RESOURCE"})," to configure how the query is exposed in MCP."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"uri"}),": AN RFC 6570 template to configure the REST path and MCP resource path. Any operation arguments that are not defined in the uri template are considered part of the payload for REST (and the method must be POST)."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query GetPersonByAge($age: Int!) @api(rest: GET, mcp: TOOL, uri: "/queries/personByAge/{age}") {\n    Person(age: $age, limit: 10, offset: 0) {\n        name\n        email\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This defines an operation ",(0,s.jsx)(n.code,{children:"GetPersonByAge"})," which is the name of the MCP tool and REST endpoint with the path ",(0,s.jsx)(n.code,{children:"/queries/personByAge/{age}"})," using GET method."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var t=i(6540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);