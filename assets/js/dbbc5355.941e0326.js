"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2678],{3252:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"howto","title":"How-To Guides","description":"This page documents the advanced features of DataSQRL and extends the other documentation pages.","source":"@site/docs/howto.md","sourceDirName":".","slug":"/howto","permalink":"/docs/howto","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\ud83c\udf93 Tutorials","permalink":"/docs/tutorials"},"next":{"title":"\ud83d\udd0c Source & Sink Connectors","permalink":"/docs/connectors"}}');var o=n(4848),s=n(8453);const a={},r="How-To Guides",c={},l=[{value:"Testing",id:"testing",level:2},{value:"Script Imports",id:"script-imports",level:2},{value:"Inline Script Imports",id:"inline-script-imports",level:3},{value:"Data Discovery",id:"data-discovery",level:2},{value:"Manual Subgraph Elimination with Noop Function",id:"manual-subgraph-elimination-with-noop-function",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"how-to-guides",children:"How-To Guides"})}),"\n",(0,o.jsx)(t.p,{children:"This page documents the advanced features of DataSQRL and extends the other documentation pages."}),"\n",(0,o.jsx)(t.h2,{id:"testing",children:"Testing"}),"\n",(0,o.jsxs)(t.p,{children:["DataSQRL supports ",(0,o.jsx)(t.a,{href:"compiler#test-command",children:"running automated tests"})," for your SQRL pipeline by annotating test cases with the ",(0,o.jsx)(t.code,{children:"/*+test */"})," hint or placing test queries in the ",(0,o.jsx)(t.code,{children:"tests"})," folder (or any other folder that's passed via the ",(0,o.jsx)(t.code,{children:"--tests"})," command option)."]}),"\n",(0,o.jsxs)(t.p,{children:["The best practice for writing test cases is to ",(0,o.jsx)(t.a,{href:"connectors#connector-management",children:"modularize"})," your sources so that you dynamically link different sources for local development, testing, and production. In many cases, you can use the same sources for testing and local development in a single folder."]}),"\n",(0,o.jsx)(t.p,{children:"That data should contain explicit event timestamps for all records. That enables completely deterministic test cases. It also supports reproducing failure scenarios that you experienced in production as local test cases by using the data that caused the failure with the original timestamp. That way, you don't have to externally simulate certain sequences of events that caused the failure in the first place."}),"\n",(0,o.jsx)(t.p,{children:"In addition, it allows you to build up a repository of failures and edge cases that gets executed automatically to spot regressions."}),"\n",(0,o.jsx)(t.h2,{id:"script-imports",children:"Script Imports"}),"\n",(0,o.jsx)(t.p,{children:"SQRL supports importing table and function definitions from other SQRL scripts."}),"\n",(0,o.jsx)(t.h3,{id:"inline-script-imports",children:"Inline Script Imports"}),"\n",(0,o.jsx)(t.p,{children:"Inline imports place table and function definitions from another script into the current scope and requires\nthat table and function names do not clash with those in the importing script."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-sql",children:"IMPORT myscript.*;\n"})}),"\n",(0,o.jsxs)(t.p,{children:["This statement imports all tables and functions from a SQRL script called ",(0,o.jsx)(t.code,{children:"myscript.sqrl"})," in the local folder."]}),"\n",(0,o.jsx)(t.h2,{id:"data-discovery",children:"Data Discovery"}),"\n",(0,o.jsxs)(t.p,{children:["DataSQRL automatically generates table definitions with connector configuration and schemas for json-line files (with extension ",(0,o.jsx)(t.code,{children:".jsonl"}),") and csv files (with extension ",(0,o.jsx)(t.code,{children:".csv"}),") within the project directory. This makes it easy to import data from such files into a SQRL project."]}),"\n",(0,o.jsxs)(t.p,{children:["For example, to import data from a file ",(0,o.jsx)(t.code,{children:"orders.jsonl"})," in the folder ",(0,o.jsx)(t.code,{children:"mydata"})," you write:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-sql",children:"IMPORT mydata.orders;\n"})}),"\n",(0,o.jsxs)(t.p,{children:["When you run the compiler, it will create the table configuration file ",(0,o.jsx)(t.code,{children:"orders.table.sql"})," which you can then import like any other source. The compiler reads the file and auto-discovers the schema."]}),"\n",(0,o.jsxs)(t.p,{children:["To disable automatic discovery of data for a directory, place a file called ",(0,o.jsx)(t.code,{children:".nodiscovery"})," into that directory."]}),"\n",(0,o.jsx)(t.h2,{id:"manual-subgraph-elimination-with-noop-function",children:"Manual Subgraph Elimination with Noop Function"}),"\n",(0,o.jsx)(t.p,{children:"Sometimes the Flink optimizer is too smart for its own good and will push down predicates that make common subgraph identification impossible. That can result in much larger job graphs and poor performance or high state maintenance."}),"\n",(0,o.jsxs)(t.p,{children:["To inhibit predicate pushdown, SQRL uses the ",(0,o.jsx)(t.code,{children:"noop"})," function that takes an arbitrary list of argument and always returns true.\nAs such, the function serves no purpose other than making it impossible for the optimizer to push down predicates."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var i=n(6540);const o={},s=i.createContext(o);function a(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);