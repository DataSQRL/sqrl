"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[342],{2806:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/dag_messenger-799747c05bd8addfb969457a67a15f44.png"},4792:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/getting_started_diagram1-2f42cdff80a615abf8377a591fc8ac43.png"},7715:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"intro/getting-started","title":"Getting Started with DataSQRL","description":"The easiest way to understand how DataSQRL guides and provides feedback for agentic development of data pipelines is to build a data pipeline yourself. We are going to build a pipeline for message processing.","source":"@site/docs/intro/getting-started.md","sourceDirName":"intro","slug":"/intro/getting-started","permalink":"/docs/intro/getting-started","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udcd6 Overview","permalink":"/docs/intro/"},"next":{"title":"\ud83d\udcda SQRL Language","permalink":"/docs/sqrl-language"}}');var i=s(4848),a=s(8453);const r={},o="Getting Started with DataSQRL",l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install Docker",id:"install-docker",level:3},{value:"Create New Project",id:"create-new-project",level:2},{value:"Run SQRL Script",id:"run-sqrl-script",level:2},{value:"Access the API",id:"access-the-api",level:2},{value:"Extend the SQRL Script",id:"extend-the-sqrl-script",level:2},{value:"Deployment",id:"deployment",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"getting-started-with-datasqrl",children:"Getting Started with DataSQRL"})}),"\n",(0,i.jsx)(n.p,{children:"The easiest way to understand how DataSQRL guides and provides feedback for agentic development of data pipelines is to build a data pipeline yourself. We are going to build a pipeline for message processing."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.p,{children:"You'll need:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Docker"})," installed"]}),"\n",(0,i.jsx)(n.li,{children:"A terminal (macOS/Linux: Terminal, Windows: PowerShell or WSL)"}),"\n",(0,i.jsx)(n.li,{children:"Basic understanding of SQL"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"install-docker",children:"Install Docker"}),"\n",(0,i.jsx)(n.p,{children:"If you don't already have Docker:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"macOS"}),": ",(0,i.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop/",children:"Download Docker Desktop for Mac"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Windows"}),": ",(0,i.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop/",children:"Download Docker Desktop for Windows"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Linux"}),": Use your package manager (e.g., ",(0,i.jsx)(n.code,{children:"sudo apt install docker.io"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Verify Docker is working:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker --version\n"})}),"\n",(0,i.jsx)(n.p,{children:"Make sure Docker is running before continuing."}),"\n",(0,i.jsx)(n.h2,{id:"create-new-project",children:"Create New Project"}),"\n",(0,i.jsxs)(n.p,{children:["To create a new data project with DataSQRL, use the ",(0,i.jsx)(n.code,{children:"init"})," command in an empty folder."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:" docker run --rm -v $PWD:/build datasqrl/cmd init api messenger\n"})}),"\n",(0,i.jsxs)(n.p,{children:["(Use ",(0,i.jsx)(n.code,{children:"${PWD}"})," in Powershell on Windows)."]}),"\n",(0,i.jsxs)(n.p,{children:["This creates a new data API project called ",(0,i.jsx)(n.code,{children:"messenger"})," with some sample data sources and a simple data processing script called ",(0,i.jsx)(n.code,{children:"messenger.sqrl"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"The script defines a simple HelloWorld table that exposes the imported messages. The source of the messages is a managed Kafka topic in production and static Json data for testing."}),"\n",(0,i.jsxs)(n.p,{children:["The engines executing the pipeline are defined in the ",(0,i.jsx)(n.code,{children:"package.json"})," files and create the following architecture:\n",(0,i.jsx)(n.img,{alt:"Initial Pipeline Architecture",src:s(4792).A+"",width:"3414",height:"1462"})]}),"\n",(0,i.jsx)(n.h2,{id:"run-sqrl-script",children:"Run SQRL Script"}),"\n",(0,i.jsx)(n.p,{children:"We can now execute the SQRL project with the compiler:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --rm -p 8888:8888 -p 8081:8081 -v $PWD:/build datasqrl/cmd run messenger-prod-package.json\n"})}),"\n",(0,i.jsx)(n.p,{children:"Note, that we are mapping the local directory so the compiler has access to the script. We are also mapping a number of ports, so we have access to the API and visibility into the pipeline."}),"\n",(0,i.jsx)(n.h2,{id:"access-the-api",children:"Access the API"}),"\n",(0,i.jsxs)(n.p,{children:["The pipeline is exposed through a GraphQL API that you can access at  ",(0,i.jsx)(n.a,{href:"http://localhost:8888/v1/graphiql/",children:"http://localhost:8888/v1/graphiql/"})," in your browser."]}),"\n",(0,i.jsx)(n.p,{children:"To add a new message, run this mutation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'mutation {\n    Messages(event: {message: "Hello World"}) {\n        message_time\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:'Copy the query into the left-hand panel and click on the "play" button to see the result.'}),"\n",(0,i.jsx)(n.p,{children:"To query the aggregated statistics, run the following query:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"{\n    Messages {\n        uuid\n        message\n        message_time\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Once you are done, terminate the pipeline with ",(0,i.jsx)(n.code,{children:"CTRL-C"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"extend-the-sqrl-script",children:"Extend the SQRL Script"}),"\n",(0,i.jsxs)(n.p,{children:["Let's add more data processing to our script. Copy the following SQL code into ",(0,i.jsx)(n.code,{children:"messenger.sqrl"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"TotalMessages := SELECT COUNT(*) as num_messages, MAX(message_time) as latest_timestamp\n                 FROM Messages LIMIT 1;\n\nAlertMessages := SUBSCRIBE SELECT * FROM Messages WHERE LOWER(message) LIKE '%error%';\n"})}),"\n",(0,i.jsxs)(n.p,{children:["First, we are aggregating total messages. Next, we are adding a subscription for messages that contain the word ",(0,i.jsx)(n.code,{children:"error"}),". These messages get pushed to consumers immediately. Finally, we are adding a test case for the total messages."]}),"\n",(0,i.jsx)(n.p,{children:"To run the test cases, use this command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --rm -v $PWD:/build datasqrl/cmd test messenger-test-package.json\n"})}),"\n",(0,i.jsx)(n.p,{children:"The first time you run a new test case, you will see a failure when the snapshot is created. When you run the test again, it will pass."}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"AlertMessages"})," get pushed out via the API. Run the production version:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --rm -p 8888:8888 -p 8081:8081 -v $PWD:/build datasqrl/cmd run messenger-prod-package.json\n"})}),"\n",(0,i.jsx)(n.p,{children:"In the GraphQL IDE, execute the following subscription"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"subscription {\n    AlertMessages {\n        uuid\n        message\n        message_time\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"While"})," the subscription is running, open a new browser tab for ",(0,i.jsx)(n.a,{href:"http://localhost:8888/v1/graphiql/",children:"GraphiQL"})," and execute this mutation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'mutation {\n    Messages(event: {message: "I found an ERROR! Oh no"}) {\n        message_time\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"If you toggle back to the subscription tab, you should see the message getting pushed through."}),"\n",(0,i.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,i.jsx)(n.p,{children:"To build the deployment assets in the for the data pipeline, execute"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --rm -v $PWD:/build datasqrl/cmd compile messenger-prod-package.json\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"build/deploy/plan"})," directory contains the Flink compiled plan, Kafka topic definitions, PostgreSQL schema and view definitions, server queries, and GraphQL data model."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"build"})," directory contains additional files that are useful to inspect, verify, and understand the physical model for the data pipeline:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipeline_visual.html"})," is a visual representation of the entire data pipeline. Open this file in your browser."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipeline_explain.txt"})," contains a textual representation of the pipeline DAG that DataSQRL generates for AI coding agents."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inferred_schema.graphqls"})," contains the generated GraphQL schema for the API."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"DataSQRL Pipeline Visualization",src:s(2806).A+"",width:"3002",height:"1598"})}),"\n",(0,i.jsx)(n.p,{children:"The picture above is the visualization of the pipeline we have build thus far. You can click on the individual nodes in the graph to inspect the schema, logical, and physical plan."}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"Congratulations, you build a production-grade data pipeline and saw how DataSQRL generates the physical pipeline model from the logical definition of the data processing.\nWe used the testing framework to simulate real-world execution of the pipeline and used snapshots validating the results."}),"\n",(0,i.jsx)(n.p,{children:"Together, those three elements - the conceptual framework with the logical (SQL) and physical (dataflow DAG) model, the compiler and validator, and the simulator - comprise the world model of DataSQRL. This world model provides feedback and guardrails to coding agents for autonomous development of data pipelines and data products. Now, you can pair up DataSQRL with your favorite coding agent and let it do the work for you."}),"\n",(0,i.jsx)(n.p,{children:"Next, check out:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/intro",children:"Full Documentation"})})," for the complete reference, language spec, and more."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"tutorials",children:"Tutorials"})})," if you prefer learning by doing."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ports already in use"}),": Check if 8888 or 8081 is being used by another app"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var t=s(6540);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);