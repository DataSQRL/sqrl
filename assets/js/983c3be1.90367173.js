"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3915],{8213:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>o,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"configuration-engine/vertx","title":"Vert.x Engine Configuration","description":"Eclipse Vert.x is a reactive server framework that serves as the GraphQL API server, routing queries to the backing database/log engines.","source":"@site/docs/configuration-engine/vertx.md","sourceDirName":"configuration-engine","slug":"/configuration-engine/vertx","permalink":"/docs/configuration-engine/vertx","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Kafka Engine","permalink":"/docs/configuration-engine/kafka"},"next":{"title":"PostgreSQL Engine","permalink":"/docs/configuration-engine/postgres"}}');var s=i(4848),r=i(8453);const o={},d="Vert.x Engine Configuration",c={},h=[{value:"Configuration Options",id:"configuration-options",level:2},{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"JWT Authentication Configuration",id:"jwt-authentication-configuration",level:2},{value:"OAuth 2.0 Authentication Configuration",id:"oauth-20-authentication-configuration",level:2},{value:"Combined JWT and OAuth Authentication",id:"combined-jwt-and-oauth-authentication",level:3},{value:"OAuthConfig Structure",id:"oauthconfig-structure",level:3},{value:"OAuth2Options Configuration",id:"oauth2options-configuration",level:3},{value:"OAuth Discovery Endpoint",id:"oauth-discovery-endpoint",level:3},{value:"Environment Variable Support",id:"environment-variable-support",level:3},{value:"Deployment Configuration",id:"deployment-configuration",level:2},{value:"Instance Size Options",id:"instance-size-options",level:3},{value:"Deployment Example",id:"deployment-example",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"vertx-engine-configuration",children:"Vert.x Engine Configuration"})}),"\n",(0,s.jsx)(n.p,{children:"Eclipse Vert.x is a reactive server framework that serves as the GraphQL API server, routing queries to the backing database/log engines."}),"\n",(0,s.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Key"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"authKind"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"array"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"[]"})}),(0,s.jsxs)(n.td,{children:["List of auth methods: ",(0,s.jsx)(n.code,{children:'"JWT"'}),", ",(0,s.jsx)(n.code,{children:'"OAUTH"'}),", or both"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"object"})}),(0,s.jsx)(n.td,{children:"see below"}),(0,s.jsx)(n.td,{children:"Vert.x-specific configuration including auth settings"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "engines": {\n    "vertx": {\n      "authKind": []\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"jwt-authentication-configuration",children:"JWT Authentication Configuration"}),"\n",(0,s.jsx)(n.p,{children:"For secure APIs with JWT authentication:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json5",children:'{\n  "engines": {\n    "vertx": {\n      "authKind": ["JWT"],\n      "config": {\n        "jwtAuth": {\n          "pubSecKeys": [\n            {\n              "algorithm": "HS256",\n              "buffer": "<signer-secret>" // Base64 encoded signer secret string\n            }\n          ],\n          "jwtOptions": {\n            "issuer": "<jwt-issuer>",\n            "audience": ["<jwt-audience>"],\n            "expiresInSeconds": 3600,\n            "leeway": 30\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["As these config fields will be mapped to Vert.x Java POJOs, the name of the key fields are very important.\nFor ",(0,s.jsx)(n.code,{children:"pubSecKeys"}),", it is also possible to use different algorithms, thet requires the key in a different (mostly PEM) format.\nFor example, for ",(0,s.jsx)(n.code,{children:"ES256"}),", this would look something like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "pubSecKeys": [\n    {\n      "algorithm": "ES256",\n      "buffer": "-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhk...restOfBase64...\\n-----END PUBLIC KEY-----"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"oauth-20-authentication-configuration",children:"OAuth 2.0 Authentication Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["For OAuth 2.0 authentication with providers like Auth0 or Keycloak, use the ",(0,s.jsx)(n.code,{children:"oauthConfig"})," section.\nThis enables MCP (Model Context Protocol) clients like Claude Code to authenticate using OAuth."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "engines": {\n    "vertx": {\n      "authKind": ["OAUTH"],\n      "config": {\n        "oauthConfig": {\n          "oauth2Options": {\n            "site": "https://your-tenant.auth0.com/",\n            "clientId": "your-client-id"\n          },\n          "authorizationServerUrl": "https://your-tenant.auth0.com/",\n          "scopesSupported": ["mcp:tools", "mcp:resources"]\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"combined-jwt-and-oauth-authentication",children:"Combined JWT and OAuth Authentication"}),"\n",(0,s.jsx)(n.p,{children:"You can enable both authentication methods simultaneously:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "engines": {\n    "vertx": {\n      "authKind": ["JWT", "OAUTH"],\n      "config": {\n        "jwtAuth": { ... },\n        "oauthConfig": { ... }\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"oauthconfig-structure",children:"OAuthConfig Structure"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"oauthConfig"})," object combines Vert.x's ",(0,s.jsx)(n.a,{href:"https://vertx.io/docs/apidocs/io/vertx/ext/auth/oauth2/OAuth2Options.html",children:"OAuth2Options"})," with discovery metadata:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Key"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"oauth2Options"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"object"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Vert.x OAuth2Options for authentication"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"authorizationServerUrl"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"string"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"External authorization server URL for discovery"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scopesSupported"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"array"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Scopes advertised (default: ",(0,s.jsx)(n.code,{children:'["mcp:tools", "mcp:resources"]'}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"resource"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"string"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Override resource identifier in discovery metadata"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"oauth2options-configuration",children:"OAuth2Options Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"oauth2Options"})," object uses Vert.x's OAuth2Options class:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Key"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"site"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsxs)(n.td,{children:["OAuth issuer URL (e.g., ",(0,s.jsx)(n.code,{children:"https://tenant.auth0.com"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"clientId"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"string"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["OAuth client ID (defaults to ",(0,s.jsx)(n.code,{children:"datasqrl-mcp"}),")"]})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"oauth-discovery-endpoint",children:"OAuth Discovery Endpoint"}),"\n",(0,s.jsxs)(n.p,{children:["When OAuth is configured, the server exposes a discovery endpoint at ",(0,s.jsx)(n.code,{children:"/.well-known/oauth-protected-resource"})," per RFC 9728.\nThis enables MCP clients to discover the authorization server and scopes."]}),"\n",(0,s.jsx)(n.h3,{id:"environment-variable-support",children:"Environment Variable Support"}),"\n",(0,s.jsx)(n.p,{children:"You can use environment variables in the OAuth configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "oauthConfig": {\n    "oauth2Options": {\n      "site": "${AUTH0_ISSUER}"\n    },\n    "authorizationServerUrl": "${AUTH0_EXTERNAL_URL}"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"deployment-configuration",children:"Deployment Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Vert.x supports deployment-specific configuration options for scaling the API server:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Key"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"instance-size"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"string"})}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Server instance size with storage variants"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"instance-count"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"integer"})}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Number of server instances to run (minimum: 1)"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"instance-size-options",children:"Instance Size Options"}),"\n",(0,s.jsxs)(n.p,{children:["Available ",(0,s.jsx)(n.code,{children:"instance-size"})," options with storage variants:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dev"})," - Development/testing size"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"small"}),", ",(0,s.jsx)(n.code,{children:"small.disk"})," - Small instances with optional additional disk"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"medium"}),", ",(0,s.jsx)(n.code,{children:"medium.disk"})," - Medium instances with optional additional disk"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"large"}),", ",(0,s.jsx)(n.code,{children:"large.disk"})," - Large instances with optional additional disk"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"deployment-example",children:"Deployment Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "engines": {\n    "vertx": {\n      "deployment": {\n        "instance-size": "medium.disk",\n        "instance-count": 3\n      }\n    }\n  }\n}\n'})})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);